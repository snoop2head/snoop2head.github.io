{"version":3,"sources":["webpack:///./src/templates/blogPost.js"],"names":["Wrapper","data","pageContext","location","metaData","site","siteMetadata","markdownRemark","frontmatter","html","tableOfContents","excerpt","useState","undefined","currentHeaderUrl","setCurrentHeaderUrl","isTOCVisible","length","useEffect","handleScroll","aboveHeaderUrl","currentOffsetY","window","pageYOffset","headerElements","Array","prototype","slice","call","document","querySelectorAll","filter","el","closest","elem","elemTop","getBoundingClientRect","top","isLast","split","origin","href","addEventListener","removeEventListener","title","description","css","className","date","tags","onClick","tag","navigate","color","toc","url","text","author","sponsor","buyMeACoffeeId","target","rel","src","alt","repo","comment","utterances"],"mappings":"2lCAcA,IAAMA,EAAO,iI,s0BAGE,sBAAsC,IAAnCC,EAAkC,EAAlCA,KAAMC,EAA4B,EAA5BA,YAAaC,EAAe,EAAfA,SAC7BC,EAAWH,EAAKI,KAAKC,aACnBC,EAAmBN,EAAnBM,eACAC,EAAgDD,EAAhDC,YAAaC,EAAmCF,EAAnCE,KAAMC,EAA6BH,EAA7BG,gBAAiBC,EAAYJ,EAAZI,QAE5C,EAAgDC,wBAASC,GAAlDC,EAAP,KAAyBC,EAAzB,KAEMC,GAAeN,aAAA,EAAAA,EAAiBO,QAAS,EAwC/C,OAlCAC,qBAAU,WACR,IAAMC,EAAe,WAWnB,IAVA,IAAIC,EAUJ,EATMC,EAAiBC,OAAOC,YACxBC,EAAiBC,MAAMC,UAAUC,MACpCC,KAAKC,SAASC,iBAAiB,gBAC/BC,QAAO,SAAUC,GAChB,OAAQA,EAAGC,QACT,2GAIN,IAAmBT,KAAnB,aAAmC,CAAC,IAAzBU,EAAwB,QAE3BC,EADUD,EAAKE,wBAAbC,IACchB,EAChBiB,EAASJ,IAASV,EAAeA,EAAeP,OAAS,GAC/D,GAAII,EAAiBc,EA/BR,GA+BgC,CAC3Cf,GACEL,EAAoBK,EAAemB,MAAMjB,OAAOnB,SAASqC,QAAQ,KAClEpB,GAAkBL,OAAoBF,GACvC,MAEAyB,GACEvB,EAAoBmB,EAAKO,KAAKF,MAAMjB,OAAOnB,SAASqC,QAAQ,KAC7DF,IAAWlB,EAAiBc,EAAKO,QAKxC,OADAnB,OAAOoB,iBAAiB,SAAUvB,GAC3B,WACLG,OAAOqB,oBAAoB,SAAUxB,MAEtC,IAGD,8BACE,YAAC,IAAD,KACE,YAAC,IAAD,CAAKyB,MAAOpC,EAAYoC,MAAOC,YAAalC,IAC5C,mBAAKmC,IAAG,EAAiBC,UAAU,uBACjC,mBAAKA,UAAU,aACb,YAAC/C,EAAD,KACE,kBACE+C,UAAU,aACVD,IAAG,GAEFtC,EAAYoC,OAEf,kBAAIG,UAAU,YAAYD,IAAG,GAC1BtC,EAAYwC,MAEf,mBAAKD,UAAU,YAAYD,IAAG,GAC5B,YAAC,IAAD,CAAMG,KAAMzC,EAAYyC,KAAMC,QAvDrB,SAACC,GACtBC,mBAAS,SAASD,OAwDR,YAAC,IAAD,CAASE,OAAK,KAEhB,mBAAKN,UAAW,gBACb/B,GACC,YAAC,IAAD,CACEsC,IAAK5C,EACLI,iBAAkBA,IAGtB,YAACd,EAAD,KACE,YAAC,IAAD,CAAUS,KAAMA,MAGpB,YAACT,EAAD,KACE,YAAC,IAAD,CACEuD,IAAKpD,EAASsC,KACde,KAAI,mBACJhD,EAAYoC,MADR,MACmBxC,EAASqD,OAD5B,qBAEJ9C,IAEDP,EAASsD,QAAQC,gBAChB,mBAAKb,IAAG,GACN,iBACEA,IAAG,EAIHc,OAAO,SACPC,IAAI,sBACJpB,KAAI,gCAAkCrC,EAASsD,QAAQC,gBAEvD,mBACEb,IAAG,EACHgB,IAAI,2DACJC,IAAI,oBAEN,gDAOZ,YAAC/D,EAAD,KACE,YAAC,IAAD,CAAWE,YAAaA,IACxB,YAAC,IAAD,MACA,mBAAK4C,IAAG,GACN,YAAC,IAAD,CAAYkB,KAAM5D,EAAS6D,QAAQC","file":"component---src-templates-blog-post-js-f0ceb2b31654baa6390d.js","sourcesContent":["import React, { useEffect, useState } from \"react\"\nimport { graphql, navigate } from \"gatsby\"\nimport SEO from \"../components/seo\"\nimport Profile from \"../components/Profile\"\nimport tw, { css } from \"twin.macro\"\nimport Markdown from \"../components/Markdown\"\nimport Navigator from \"../components/Navigator\"\nimport Divider from \"../components/Divider\"\nimport TableOfContents from \"../components/TableOfContents\"\nimport Layout from \"../components/Layout\"\nimport Utterances from \"../components/Utterances\"\nimport Tags from \"../components/Tags\"\nimport ShareButtons from \"../components/ShareButtons\"\n\nconst Wrapper = tw.div`w-full max-w-screen-md mx-auto`\nconst NAV_OFFSET_Y = 36\n\nexport default ({ data, pageContext, location }) => {\n  const metaData = data.site.siteMetadata\n  const { markdownRemark } = data\n  const { frontmatter, html, tableOfContents, excerpt } = markdownRemark\n\n  const [currentHeaderUrl, setCurrentHeaderUrl] = useState(undefined)\n\n  const isTOCVisible = tableOfContents?.length > 0\n\n  const handleTagClick = (tag) => {\n    navigate(`/?tag=${tag}`)\n  }\n\n  useEffect(() => {\n    const handleScroll = () => {\n      let aboveHeaderUrl\n      const currentOffsetY = window.pageYOffset\n      const headerElements = Array.prototype.slice\n        .call(document.querySelectorAll(\".toc-header\"))\n        .filter(function (el) {\n          return !el.closest(\n            \"blockquote > h1, blockquote > h2, blockquote > h3, blockquote > h4, blockquote > h5, blockquote > h6\"\n          )\n        })\n\n      for (const elem of headerElements) {\n        const { top } = elem.getBoundingClientRect()\n        const elemTop = top + currentOffsetY\n        const isLast = elem === headerElements[headerElements.length - 1]\n        if (currentOffsetY < elemTop - NAV_OFFSET_Y) {\n          aboveHeaderUrl &&\n            setCurrentHeaderUrl(aboveHeaderUrl.split(window.location.origin)[1])\n          !aboveHeaderUrl && setCurrentHeaderUrl(undefined)\n          break\n        } else {\n          isLast &&\n            setCurrentHeaderUrl(elem.href.split(window.location.origin)[1])\n          !isLast && (aboveHeaderUrl = elem.href)\n        }\n      }\n    }\n    window.addEventListener(\"scroll\", handleScroll)\n    return () => {\n      window.removeEventListener(\"scroll\", handleScroll)\n    }\n  }, [])\n\n  return (\n    <>\n      <Layout>\n        <SEO title={frontmatter.title} description={excerpt} />\n        <div css={tw`mt-4 px-4`} className=\"blog-post-container\">\n          <div className=\"blog-post\">\n            <Wrapper>\n              <h1\n                className=\"blog-title\"\n                css={tw`text-4xl md:text-5xl font-bold mb-4`}\n              >\n                {frontmatter.title}\n              </h1>\n              <h2 className=\"blog-date\" css={tw`text-base mb-4`}>\n                {frontmatter.date}\n              </h2>\n              <div className=\"blog-tags\" css={tw`mb-2`}>\n                <Tags tags={frontmatter.tags} onClick={handleTagClick} />\n              </div>\n              <Divider color />\n            </Wrapper>\n            <div className={\"blog-content\"}>\n              {isTOCVisible && (\n                <TableOfContents\n                  toc={tableOfContents}\n                  currentHeaderUrl={currentHeaderUrl}\n                />\n              )}\n              <Wrapper>\n                <Markdown html={html} />\n              </Wrapper>\n            </div>\n            <Wrapper>\n              <ShareButtons\n                url={location.href}\n                text={`\n              ${frontmatter.title} - ${metaData.author}\\n\n              ${excerpt}`}\n              />\n              {metaData.sponsor.buyMeACoffeeId && (\n                <div css={tw`flex justify-end px-2`}>\n                  <a\n                    css={css`\n                      ${tw`flex px-3 py-1 my-2 rounded text-white`}\n                      background-color: #FF813E;\n                    `}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    href={`https://www.buymeacoffee.com/${metaData.sponsor.buyMeACoffeeId}`}\n                  >\n                    <img\n                      css={tw`mr-2`}\n                      src=\"https://www.buymeacoffee.com/assets/img/BMC-btn-logo.svg\"\n                      alt=\"Buy me a coffee\"\n                    />\n                    <span>Buy me a coffee</span>\n                  </a>\n                </div>\n              )}\n            </Wrapper>\n          </div>\n        </div>\n        <Wrapper>\n          <Navigator pageContext={pageContext} />\n          <Profile />\n          <div css={tw`mt-5 mx-2`}>\n            <Utterances repo={metaData.comment.utterances} />\n          </div>\n        </Wrapper>\n      </Layout>\n    </>\n  )\n}\nexport const pageQuery = graphql`\n  query PostQuery($slug: String!) {\n    site {\n      siteMetadata {\n        author\n        comment {\n          utterances\n        }\n        sponsor {\n          buyMeACoffeeId\n        }\n      }\n    }\n    markdownRemark(fields: { slug: { eq: $slug } }) {\n      excerpt(pruneLength: 200, truncate: true)\n      html\n      tableOfContents\n      frontmatter {\n        date(formatString: \"YYYY-MM-DD\")\n        title\n        tags\n      }\n    }\n  }\n`\n"],"sourceRoot":""}